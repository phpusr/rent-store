# Maintainer: phpusr
pkgname=rent-store
pkgver=1.0.0
pkgrel=1
pkgdesc='rent-store'
arch=('x86_64')
url='https://github.com/phpusr/rent-store'
license=('GPL')
depends=('electron17')
makedepends=('npm')
provides=('rent-store')
source_x86_64=(
  "rent-store-v${pkgver}.tar.gz::${url}/archive/refs/heads/main.zip"
)
source=(
  'rent_store.desktop'
  'rent_store.sh'
  'icon.png'
)
sha1sums=('691e090c438280f19486ce0a8da6634bc43f4eaf'
          '16544f028cce0c0f4ca91e0ee05cc5bff190c601'
          'a6e8632ec5fcc913bde518430c5a788f49c5e113')
sha1sums_x86_64=('b31a47fc7187d0641ca1262fad26c63fc6c129a2')

package() {
  cd "${srcdir}/rent-store-main"
  make build

  # Install app resources
  cd dist/rent-store
  find . -type f -exec install -Dm644 {} "${pkgdir}/usr/share/rent_store/{}" \;

  # Install bin
  install -Dm755 "${srcdir}/rent_store.sh" "${pkgdir}/usr/bin/rent_store"

  # Install desktop
  install -Dm755 "${srcdir}/rent_store.desktop" "${pkgdir}/usr/share/applications/rent_store.desktop"

  # Install icon
  install -Dm644 "${srcdir}/icon.png" "${pkgdir}/usr/share/icons/hicolor/512x512/apps/rent_store.png"
}
